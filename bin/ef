#!/bin/sh

emacsrunning=`pgrep emacs`
editor=`test -z "$emacsrunning" && echo "emacs" || (test -z "$1" && echo "emacsclient" || echo "emacsclient -c")`
echo "using editor $editor"
if [ -z "$1" ]; then
    f=`pf`
    test -z "$f" || (nohup $editor $f 1>/dev/null 2>/dev/null &)
else
    pf | xargs -ro devour $editor
fi
