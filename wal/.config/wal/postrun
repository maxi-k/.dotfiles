#!/bin/sh

confdir=${XDG_CONFIG_HOME:-$HOME/.config}
cachedir=${XDG_CONFIG_CACHE:-$HOME/.cache}

. "$cachedir/wal/colors.sh"

# Set the new colors generated by wal
xrdb -override $cachedir/wal/colors.Xresources
# Reset color that are supposed to stay constant
[ -e $confdir/X/constant-config ] && xrdb -override $confdir/X/constant-config

# Restart dunst, link the config
pkill dunst
[ -f $cachedir/wal/dunstrc ] && \
  (dunst -conf "$cachedir/wal/dunstrc" &) || \
  (dunst &)

if command -v dwmc >/dev/null; then 
  COL_LIST="$foreground$background$color8$foreground$color10$foreground"
  echo "c$COL_LIST" | dwmc | xargs notify-send "Changing dwm colors: "
fi
